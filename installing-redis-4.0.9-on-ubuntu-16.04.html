<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Installing Redis 4.0.9 on Ubuntu 16.04</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="Description of my blog" />
    <link rel="shortcut icon" href="/assets/images/favicon.png" type="image/png" />
    <link rel="canonical" href="/installing-redis-4.0.9-on-ubuntu-16.04" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="My Blog" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Installing Redis 4.0.9 on Ubuntu 16.04" />
    <meta property="og:description" content="Prerequisites Redis 소스를 컴파일하고 설치하기 위해 필요한 패키지들을 설치합니다. $ sudo apt-get update -y $ sudo apt-get install gcc make Installing Redis Redis 공식 사이트에서는 소스를 컴파일하여 설치하는 방법을 추천하고 있습니다. 이는, Linux 배포판의 패키지 관리자를 사용하여 설치할 경우 일반적으로 사용 가능한 버전이 최신이 아닐 수 있기 때문입니다. Redis는 GCC" />
    <meta property="og:url" content="/installing-redis-4.0.9-on-ubuntu-16.04" />
    <meta property="og:image" content="/assets/images/redis-wallpaper.png" />
    <meta property="article:publisher" content="https://www.facebook.com/ohing504" />
    <meta property="article:author" content="https://www.facebook.com/ohing504" />
    <meta property="article:published_time" content="2018-03-30T06:29:00+00:00" />
    <meta property="article:modified_time" content="2018-03-30T06:29:00+00:00" />
    <meta property="article:tag" content="Redis" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Installing Redis 4.0.9 on Ubuntu 16.04" />
    <meta name="twitter:description" content="Prerequisites Redis 소스를 컴파일하고 설치하기 위해 필요한 패키지들을 설치합니다. $ sudo apt-get update -y $ sudo apt-get install gcc make Installing Redis Redis 공식 사이트에서는 소스를 컴파일하여 설치하는 방법을 추천하고 있습니다. 이는, Linux 배포판의 패키지 관리자를 사용하여 설치할 경우 일반적으로 사용 가능한 버전이 최신이 아닐 수 있기 때문입니다. Redis는 GCC" />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image" content="/assets/images/redis-wallpaper.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="My Blog" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Redis" />
    <meta name="twitter:site" content="@ohing504" />
    <meta name="twitter:creator" content="@ohing504" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "My Blog",
        "logo": "/assets/images/blog-icon.png"
    },
    "url": "/installing-redis-4.0.9-on-ubuntu-16.04",
    "image": {
        "@type": "ImageObject",
        "url": "/assets/images/redis-wallpaper.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/installing-redis-4.0.9-on-ubuntu-16.04"
    },
    "description": "Prerequisites Redis 소스를 컴파일하고 설치하기 위해 필요한 패키지들을 설치합니다. $ sudo apt-get update -y $ sudo apt-get install gcc make Installing Redis Redis 공식 사이트에서는 소스를 컴파일하여 설치하는 방법을 추천하고 있습니다. 이는, Linux 배포판의 패키지 관리자를 사용하여 설치할 경우 일반적으로 사용 가능한 버전이 최신이 아닐 수 있기 때문입니다. Redis는 GCC"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Installing Redis 4.0.9 on Ubuntu 16.04" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="/"><img src="/assets/images/blog-icon.png" alt="My Blog" /></a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/getting-started/">Getting Started</a></li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
                <a class="social-link social-link-fb" href="https://facebook.com/ohing504" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
</a>
            
            
                <a class="social-link social-link-tw" href="https://twitter.com/ohing504" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
</a>
            
        </div>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full post tag-getting-started ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="30 March 2018">30 March 2018</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/redis/'>REDIS</a>,
                            
                        
                            
                               <a href='/tag/getting-started/'>GETTING STARTED</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">Installing Redis 4.0.9 on Ubuntu 16.04</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/assets/images/redis-wallpaper.png)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <h1 id="prerequisites">Prerequisites</h1>

<p>Redis 소스를 컴파일하고 설치하기 위해 필요한 패키지들을 설치합니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>apt-get update <span class="nt">-y</span>
<span class="nv">$ </span><span class="nb">sudo </span>apt-get install gcc make
</code></pre></div></div>

<h1 id="installing-redis">Installing Redis</h1>

<p>Redis 공식 사이트에서는 소스를 컴파일하여 설치하는 방법을 추천하고 있습니다.
이는, Linux 배포판의 패키지 관리자를 사용하여 설치할 경우 일반적으로 사용 가능한 버전이 최신이 아닐 수 있기 때문입니다.
Redis는 GCC 컴파일러와 libc 외에 다른 의존성이 없기 때문에 컴파일하여 설치하기 수월합니다.</p>

<p>Redis를 컴파일하여 설치하기 위해 다음과 같이 작업합니다 (글 작성시의 Redis 버전은 <code class="highlighter-rouge">4.0.9</code>입니다):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>wget http://download.redis.io/redis-stable.tar.gz
<span class="nv">$ </span><span class="nb">tar </span>xvzf redis-stable.tar.gz
<span class="nv">$ </span><span class="nb">cd </span>redis-stable
<span class="nv">$ </span>make
</code></pre></div></div>

<p>컴파일이 정상적으로 완료되면 <em>src</em> 디렉토리 내에 다음과 같은 실행가능한 바이너리들이 있는것을 확인할 수 있습니다:</p>

<ul>
  <li><strong>redis-server</strong>: Redis 서버입니다. 서버를 구동할 때 사용합니다.</li>
  <li><strong>redis-sentinel</strong>: Redis 서버의 상태를 모니터링하고 장애 발생 시 복구하는 감시 프로그램입니다.</li>
  <li><strong>redis-cli</strong>: Redis를 사용하기 위한 Command Line Interface(CLI) 유틸입니다.</li>
  <li><strong>redis-benchmark</strong>: Redis의 성능을 테스트하기 위해 사용하는 프로그램입니다.</li>
  <li><strong>redis-check-aof</strong> and <strong>redis-check-dump</strong>: 가끔 발생하는 데이터 손상시 유용합니다.</li>
</ul>

<p>다음 명령어를 통해 위의 바이너리 파일들을 설치(복사) 합니다:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>make install
</code></pre></div></div>

<p>설치되는 디렉토리는 기본값이 <code class="highlighter-rouge">usr/local/bin</code>이며 PREFIX 값을 통해 원하는 곳에 설치 가능합니다:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>make <span class="nv">PREFIX</span><span class="o">=</span>/some/other/directory install
</code></pre></div></div>

<h1 id="starting-redis">Starting Redis</h1>

<p><code class="highlighter-rouge">redis-server</code> 바이너리를 실행하여 서버가 정상적으로 동작하는지 확인합니다:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>redis-server
9308:C 28 Mar 05:09:25.302 <span class="c"># oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span>
9308:C 28 Mar 05:09:25.303 <span class="c"># Redis version=4.0.9, bits=64, commit=00000000, modified=0, pid=9308, just started</span>
9308:C 28 Mar 05:09:25.303 <span class="c"># Configuration loaded</span>
9309:M 28 Mar 05:09:25.305 <span class="k">*</span> Increased maximum number of open files to 10032 <span class="o">(</span>it was originally <span class="nb">set </span>to 1024<span class="o">)</span><span class="nb">.</span>
... more logs ...
</code></pre></div></div>

<p><code class="highlighter-rouge">redis-server</code> 실행 시 아무 옵션을 주지 않으면 모든 설정값이 기본값을 사용하며, <code class="highlighter-rouge">redis-server /etc/redis.conf</code>와 같이 설정 파일의 전체 경로를 첫번째 인자로 실행하면 설정 파일 내의 값들을 사용합니다.
Redis 소스 코드 내에 redis.conf 파일을 복사하여 서버에 맞게 설정하고 사용할 수 있습니다.</p>

<h1 id="check-if-redis-is-working">Check if Redis is working</h1>

<p>외부 프로그램들은 TCP 소켓과 Redis 프로토콜을 사용하여 Redis 서버와 통신할 수 있습니다.
Redis 프로토콜은 각 프로그래밍 언어에 맞게 라이브러리로 제공되며, 간단히 <code class="highlighter-rouge">redis-cli</code>를 사용하여 Redis 서버로 명령을 보낼 수 있습니다.</p>

<p><code class="highlighter-rouge">redis-cli</code>를 사용하여 현재 서버가 동작하고, 연결 가능한지 확인합니다:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>redis-cli ping
PONG
</code></pre></div></div>

<p>명령어 실행후 <strong>PONG</strong> 메시지를 받으면 서버가 정상적으로 동작하고 있는겁니다.</p>

<p><code class="highlighter-rouge">redis-cli</code>는 실행 인자가 없을 시, Redis 호스트는 localhost를, 포트는 6379를 기본값으로 사용합니다.
이는 <code class="highlighter-rouge">-h &lt;hostname&gt;</code>, <code class="highlighter-rouge">-p &lt;port&gt;</code> 인자를 통해 설정할 수 있으며 더 자세한 옵션은 <code class="highlighter-rouge">redis-cli --help</code>를 통해 확인해볼 수 있습니다.</p>

<h1 id="installing-redis-more-properly">Installing Redis more properly</h1>

<p>Redis를 실행하기 위해서 <code class="highlighter-rouge">redis-server</code>를 직접 실행할 수 있지만, 시스템 부팅시 매번 직접 실행 해줘야하는 번거로움이 있습니다.
보다 나은 방법으로, init script를 통해 매 시스템 부팅시 자동으로 실행되게 할 수 있습니다.</p>

<ul>
  <li>우선 Redis 설정과 데이터를 저장하기 위한 디렉토리를 생성합니다:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>mkdir /etc/redis
<span class="nv">$ </span><span class="nb">sudo </span>mkdir /var/redis
</code></pre></div></div>

<ul>
  <li>다운받은 Redis 소스의 <strong>utils</strong> 디렉토리에 있는 init script를 /etc/init.d 디렉토리에 복사합니다. 파일 이름은 사용하는 포트 번호를 포함하는 것이 좋습니다:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>cp utils/redis_init_script /etc/init.d/redis_6379
</code></pre></div></div>

<ul>
  <li>필요한 경우 init script 내의 항목을 수정합니다:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>vi /etc/init.d/redis_6379
</code></pre></div></div>

<ul>
  <li>다음으로, 다운받은 Redis 소스에서 설정 템플릿 파일을 /etc/redis/ 디렉토리에 포트번호를 이름으로 지정하여 복사합니다:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>cp redis.conf /etc/redis/6379.conf
</code></pre></div></div>

<ul>
  <li>Redis 인스턴스가 사용하는 디렉토리를 생성합니다:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>mkdir /var/redis/6379
</code></pre></div></div>

<ul>
  <li>설정 파일(<strong>/etc/redis/6379.conf</strong>)에서 다음 항목들을 수정합니다:
    <ul>
      <li><strong>daemonize</strong> yes</li>
      <li><strong>pidfile</strong> /var/run/redis_6379.pid</li>
      <li><strong>port</strong> 6379 (원하는 포트로 변경)</li>
      <li><strong>logfile</strong> /var/log/redis_6379.log</li>
      <li><strong>dir</strong> /var/redis/6379</li>
    </ul>
  </li>
  <li>마지막으로, Redis init script를 등록합니다:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>update-rc.d redis_6379 defaults
</code></pre></div></div>

<ul>
  <li>이제 다음 명령을 통해 Redis 서버를 실행 가능하며, 재부팅시에도 자동으로 Redis 인스턴스가 실행됩니다:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo</span> /etc/init.d/redis_6379 start
</code></pre></div></div>

<h1 id="performance-tips-for-redis-cache-server">Performance tips for Redis Cache Server</h1>

<p>Redis 서버의 성능을 높이기 위해서는, 설치 후 몇가지 설정을 해주어야합니다.
Redis를 설치하고 바로 실행하면 3개의 경고(WARNING) 메시지가 출력되며 설정을 변경할 것을 제안합니다.</p>

<h2 id="raise-somaxconn-above-511">Raise somaxconn above 511</h2>

<blockquote>
  <p># WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.</p>
</blockquote>

<p><code class="highlighter-rouge">somaxconn</code>은 ‘Socket Max Connection’의 약어로 최대 연결 개수를 뜻합니다.
리눅스의 경우 메모리가 128MB 보다 작을 경우 128이 기본이고, 클 경우 1024가 기본입니다.</p>

<p>동시에 너무 많은 요청이 올 경우, 예를 들어, somaxconn 값이 128일 경우 그 이상 요청이 오는 것에 대해서는 연결을 거부하게 됩니다.</p>

<p>해당 값을 변경하기 위해서, 다음과 같이 수행할 수 있습니다 (설정은 재부팅 후 적용됩니다):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>sed <span class="nt">-i</span> <span class="nt">-e</span> <span class="s1">'$i \sysctl -w net.core.somaxconn=511\n'</span> /etc/rc.local
</code></pre></div></div>

<hr />
<p><strong>NOTE</strong></p>

<p><strong>docker-compose</strong>를 사용하는 경우, <code class="highlighter-rouge">docker-compose.yml</code>의 Redis 설정에 다음 내용을 추가하여 반영 가능합니다:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">redis</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">redis</span>
  <span class="na">sysctls</span><span class="pi">:</span>
    <span class="s">net.core.somaxconn</span><span class="pi">:</span> <span class="s">511</span>
</code></pre></div></div>

<p><strong>docker run</strong>을 통해 Redis 서버를 실행하는 경우, 실행시 <code class="highlighter-rouge">--sysctl net.core.somaxconn=511</code> 인자를 추가하여 실행합니다:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">--name</span> some-redis <span class="nt">--sysctl</span> net.core.somaxconn<span class="o">=</span>511 <span class="nt">-d</span> redis
</code></pre></div></div>

<hr />

<h2 id="vmovercommit_memory--1">vm.overcommit_memory = 1</h2>

<blockquote>
  <p># WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add ‘vm.overcommit_memory = 1’ to /etc/sysctl.conf and then reboot or run the command ‘sysctl vm.overcommit_memory=1’ for this to take effect.</p>
</blockquote>

<p>해당 경고에 대해서는 다음과 같이 수행하여 설정값을 변경해줍니다:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>sed <span class="nt">-i</span> <span class="s1">'$a\ \n# ensure redis background save issue\nvm.overcommit_memory = 1\n\nsystctl vm.overcommit_memory=1'</span> /etc/sysctl.conf
</code></pre></div></div>

<h2 id="disable-thp">Disable THP</h2>

<blockquote>
  <p># WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. 
This will create latency and memory usage issues with Redis.
To fix this issue run the command ‘echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled’ as root, and add it to your /etc/rc.local in order to retain the setting after a reboot.
Redis must be restarted after THP is disabled.</p>
</blockquote>

<p>Transparent Hug Pages (THP)는 대량의 메모리를 관리하기 위한 한 방법으로, 페이지 크기를 확대(2MB or 1GB)하여 사용하는 방법입니다.
THP는 성능 개선을 목적으로하며, 대부분의 시스템 설정의 성능을 향상시키지만 DB와 같은 특정 상황에 대해서는 오히려 성능이 악화될 수 있습니다.</p>

<p>Redis는 실행 시 THP가 enabled 되어 있는 경우 경고 메시지를 출력하며, 해당 기능을 끄도록 제안하고 있습니다.</p>

<p>해당 기능은 아래와 같은 명령을 수행하는 것으로 끌 수 있습니다:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo </span>never | <span class="nb">sudo </span>tee /sys/kernel/mm/transparent_hugepage/enabled
<span class="nb">echo </span>never | <span class="nb">sudo </span>tee /sys/kernel/mm/transparent_hugepage/defrag
</code></pre></div></div>

<p>시스템 시작시 마다 해당 명령이 수행되도록 하기 위해 <strong>/etc/rc.local</strong> 파일에 명령을 추가해 놓을 수 있습니다:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>sed <span class="nt">-i</span> <span class="nt">-e</span> <span class="s1">'$i \echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled'</span> /etc/rc.local
<span class="nb">sudo </span>sed <span class="nt">-i</span> <span class="nt">-e</span> <span class="s1">'$i \echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag\n'</span> /etc/rc.local
</code></pre></div></div>

<hr />
<p><strong>NOTE</strong></p>

<p>Docker를 사용하는 경우 <strong>/etc/rc.local</strong> 파일이 <code class="highlighter-rouge">Read-only</code>로 설정되어 있어서 설정을 변경할 수 없습니다. 
하지만 설정 확인(<code class="highlighter-rouge">cat /sys/kernel/mm/transparent_hugepage/enabled</code>) 시 <code class="highlighter-rouge">madvise</code>로 되어 있고, 메모리 사용 확인(<code class="highlighter-rouge">cat /proc/meminfo</code>)시 HugePages를 사용하고 있지 않은 것 같습니다.</p>

<hr />

<h2 id="참고">참고</h2>

<ul>
  <li><a href="https://redis.io/topics/quickstart">Redis Quick Start</a></li>
  <li><a href="https://www.techandme.se/performance-tips-for-redis-cache-server/">Performance tips for Redis Cache Server</a></li>
  <li><a href="http://allthatlinux.com/dokuwiki/doku.php?id=thp_transparent_huge_pages_%EA%B8%B0%EB%8A%A5%EA%B3%BC_%EC%84%A4%EC%A0%95_%EB%B0%A9%EB%B2%95">THP(Transparent Huge Pages) 기능과 설정 방법</a></li>
</ul>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/images/ohing.jpeg" alt="ohing" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/ohing">Youngsup Oh</a></h4>
                                
                                    <p>The man</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/ohing">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/installing-logstash">
                <div class="post-card-image" style="background-image: url(/assets/images/logstash-logo.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/installing-logstash">
                <header class="post-card-header">
                    
                        
                            
                               <span class="post-card-tags">Logstash</span>
                            
                        
                            
                                <span class="post-card-tags">Getting started</span>
                            
                        
                    

                    <h2 class="post-card-title">Installing Logstash</h2>
                </header>
                <section class="post-card-excerpt">
                    <p>Installing Oracle JAVA 1.8 JDK 우선 Logstash 설치에 앞서, Logstash 실행에 필요한 자바를 설치합니다. java -version 명령어를 통해 현재 자바 버전을 확인하고, 만약 1.7 버전이 설치되어 있다면 다음 명령을 통해 삭제합니다: $ sudo</p>
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/images/ohing.jpeg" alt="Youngsup Oh" />
                        
                        <span class="post-card-author">
                            <a href="/author/ohing/">Youngsup Oh</a>
                        </span>
                    
                
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="/">
            
                <img src="/assets/images/favicon.png" alt="My Blog icon" />
            
            <span>My Blog</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Installing Redis 4.0.9 on Ubuntu 16.04</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Installing+Redis+4.0.9+on+Ubuntu+16.04&amp;url=https://ohing504.github.io/installing-redis-4.0.9-on-ubuntu-16.04"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://ohing504.github.io/installing-redis-4.0.9-on-ubuntu-16.04"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="/">My Blog</a> &copy; 2018</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyller/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    <a href="https://facebook.com/ohing504" target="_blank" rel="noopener">Facebook</a>
                    <a href="https://twitter.com/ohing504" target="_blank" rel="noopener">Twitter</a>
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-115908719-2', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
